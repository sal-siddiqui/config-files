# Function to get the current Git branch
get_git_branch() {
    git branch --show-current 2>/dev/null || return
}

# Function to get the current Python virtual environment
get_venv() {
    [[ -n "$VIRTUAL_ENV" ]] || return
    
    if [[ -n "$VIRTUAL_ENV_PROMPT" ]]; then
        echo "($VIRTUAL_ENV_PROMPT)"
    else
        echo "($(basename "$VIRTUAL_ENV"))"
    fi
}

build_prompt() {
    local venv=$(get_venv)
    local branch=$(get_git_branch)
    
    local venv_section=""
    local branch_section=""
    
    [[ -n "$venv" ]] && venv_section="\[\e[36m\]$venv\[\e[0m\] "
    [[ -n "$branch" ]] && branch_section="\[\e[33m\]$branch\[\e[0m\] "
    
    echo "${venv_section}${branch_section}\[\e[1;34m\]\W\[\e[0m\] \[\e[1;37m\]\\$\[\e[0m\] "
}

# Set dynamic prompt
PROMPT_COMMAND='PS1="\n $(build_prompt)"'
